# 2.Webpack

## 一.webpack初探

### 1.webpack是什么

- 要从一种写代码的思想说起，就是把不同的代码拆分成不同的文件，然后进行引用，这样做很好，但是对于web会有一个问题
- 通过引用的方式，如果引入关系很多的话，前后顺序，依赖关系等等，非常的混乱
- 后来出现了 CommonJS, CMD, AMD, ESM 的出现，逐渐的解决了这个问题

```js
// ES Module 导出
export default {

}

// 引入
import {} from ...
```

---

**基本使用**

- 安装webpack: npm i webpack webpack-cli --save-dev
- npx webpack index.js 就会自动识别 import 这些依赖，然后也会自动压缩到 dist/main.js（这就是webpack的自动设置形式）
- ❣️ 注意：npx 会找 node_modules 下面的，就会执行了， webpack-cli 的作用是，能让我们在命令行中运行 webpack

---

### 2.什么是模块打包工具？

- 你可以会认为webpack是一个JS的翻译器，错了，webpack其实只认识 import ，还是为了寻求依赖才具有的这个功能，真的JS翻译器是 babel
- webpack 是一个 模块打包工具（也能识别 CommonJS, CMD, AMD 规范的代码）

---

### 3.使用webpack的配置文件（输入 && 输出 && mode）

- 安装好了之后，默认 npx webpack index.js 就能进行打包了（webpack 4.x 默认值功能）
- 新建文件夹：webpack.config.js

```js
import path from 'path'

export default {

    // 环境（默认是production || development是开发环境，不压缩...）
    mode: 'production',

    // 入口
    entry: {
        main: '入口文件'
    },

    // 出口
    output: {
        filename: '输入文件名',
        path: path.resolve(__dirname, '输入文件夹')
    },

    // ......

}
```

---

## 二.webpack的核心概念

### 1.什么是loader

- **如何打包图片？**webpack刚开始写的时候，是只想做一个JS打包工具，后来才有的打包所有的功能，而除了打包JS之外的功能，其余的功能都需要来进行配置，例如 打包图片，就需要在 module 进行配置
-  npm i file-loader -D

```js
const path = require('path');

module.exports = {

  // 环境（默认是production || development是开发环境，不压缩...）
  mode: 'production',

  // 入口
  entry: {
      main: '入口文件'
  },

  // 出口
  output: {
      filename: '输入文件名',
      path: path.resolve(__dirname, '输入文件夹')
  },

  // 模块规则
  module: {
    rules: [
      {
        test: /\.jpg$/,
        use: {
          loader: 'file-loader'
        }
      }
    ]
  }

};
```

**❣️ 思考：file-loader 会把文件放到输出文件夹中，然后换个名字，然后返回名称**


---

