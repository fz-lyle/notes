# 3.JavaScript深入

---

## 第零章：解释

**感觉可以从浏览器入手，例如V8引擎，就能牵涉出JS编译的一些东西，还有事件模型，可以牵涉到 Event Loop等，还有 UI渲染部分，可以牵扯到重绘重排等...**

---

## 预编译 && 闭包

---

### 1.JavaScript运行三部曲：语法分析，预编译，解释执行

**JavaScript是 单线程，解释性语言，所谓解释性语言就是读一句，执行一句，但是JavaScript还没那么解释性，而是在这之前还有几个步骤**

- 第一步：语法分析 ，此过程会通篇扫描一遍，看看是否有语法错误
- 第二步：预编译，此过程 会把变量和函数提升，并给变量赋初始值
    - 函数提升：直接把函数提升到最前面执行
    - 变量提升：声明提升，例如 let a = 10, 只提升 let a 这一步，赋值的那一步不进行提升
- 第三步：解释执行，这才到了读一行，解释一行的地步

**备注：暗示全局变量，任何变量如果未经声明就赋值，此变量就为全局对象所有（一切声明的变量都是window的属性）**

---

### 2.预编译详解（发生在函数执行的前一刻）



---

## var let const function 到底区别在哪里？

---

## This指向详解

---

## Event Loop

---

### 1.前言介绍

要整理这里的内容，引子是一道面试题，主要考察的是定时器，Promise，async/await的执行顺序次序的问题

```js
// 问下面的执行顺序是什么？
async function async1() {
    console.log('async1 start');
    await async2();
    console.log('async1 end');
}
async function async2() {
    console.log('async2');
}
console.log('script start');
setTimeout(function() {
    console.log('setTimeout');
}, 0)
async1();
new Promise(function(resolve) {
    console.log('promise1');
    resolve();
}).then(function() {
    console.log('promise2');
});
console.log('script end');
```

然后我查阅很多资料，最终由下面两篇文章整理出基本的规则，可以应对基础的这三类问题（但是其实还有 this指向 和 原型链问题，这三者学会在面对执行问题的时候才游刃有余），正式由于我此处缺少系统性的知识，所以在此建立一个基础的知识分支，用来记录整理这块的知识点

```js

口诀：同步先执行，异步先执行微队列，再执行宏队列

细节点：Promise.then 才会放到微队列中 !!!（此题和上一道题简直承上启下）

细节点：async/await await前面的代码是同步，await后面的代码是异步（这里其实是语法糖）

细节点：还有就是小心 return （return 了promise ，那么整个promise都是微队列了）

```

- 推荐拓展阅读文章一：[最后一次搞懂 Event Loop](https://www.yanceyleo.com/p/5cbc0ad8ec9b0f4eac13467e)
- 推荐拓展阅读文章二：[微任务、宏任务与Event-Loop](https://juejin.im/post/5b73d7a6518825610072b42b#heading-5)


---

### 2.一些基础的介绍（看完其实并没有太大作用，参考与 JavaScript忍者秘籍，倒是好找新的吧）

- 浏览器执行的是 JS单线程执行模型，也就是说同一时刻只能执行一段代码，要保证这点，需要一套规则，那就是事件循环和事件队列（即事件的调度方法）
- 事件循环不仅包含事件队列，除了事件，还要保持浏览器执行的其他操作，这些操作被认为任务（宏任务，微任务）
    - 宏任务：主要创建主文档对象，解析HTML，执行主线（全局）JavaScript代码，更改当前URL以及各种事件（如页面加载，输入，网络事件，定时器等）
    - 微任务：是更小的任务，更新应用程序的状态，如 Promise回调函数，DOM发生变化


<img src="https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/2.notes/3.JavaScript/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3JavaScript/1%E5%AE%8F%E4%BB%BB%E5%8A%A1%E5%BE%AE%E4%BB%BB%E5%8A%A1%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F.png" />

--- 


## 位操作符

[mdn地址](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators)


### 1.arguments

**实参列表执行的时候有多少就是多少，不会随着后期变换**

```js
function zhu (a, b) {

    b = 2
    console.log(arguments[0]) // 1
    console.log(arguments[1]) // undefined 实参列表执行的时候有多少就是多少，不会随着后期变换

}

zhu(1)
```

---

## 📚参考列表

- 《你不知道的JavaScript》系列
- 《JavaScript忍者秘籍》（第2版）
- [for、forEach、for in 、 for of 的区别 参考](https://blog.csdn.net/one_girl/article/details/80192899)